http://www.opennet.ru/openforum/vsluhforumID9/9800.html

-------------------------------------------------------------------------------

Имеется такой пример драйвера http://tldp.org/LDP/lkmpg/2.6/html/x892.html

Задача - реализовать драйвер, поддерживающий функции
открытия, закрытия, записи, чтения и имеющий документацию.

При записи в драйвер могут передаваться команды.
Для этого нужно проводить общий анализ передаваемых в него строк,
чтобы определять какие команды передаются.
Одна из них direction [forward/back] – направление дальнейшего чтения
из драйвера.

Например последовательность команд с драйвером

echo "direction back" > /dev/chardev
cp /dev/chardev text

приведёт к чтению строки или буфера драйвера в обратном порядке,
если драйвер поддерживает работу со строками. То же для файлов.

Драйвер поддерживает чтение и запись файла в него через пользовательский
процесс:
ioctl_write_file(file_desc, file_write_desc).

Поддерживает функцию удаления сообщения:
ioctl_file_delete.
